<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>market_online | User Dashboard</title>
     <link rel="stylesheet" href="cameroon_theme.css">
    <link rel="stylesheet" href="market_online_welcome.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header class="header">
        <div class="container header-flex">
            <div class="logo">
                <h1>market_online</h1>
            </div>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </header>
    <main>
        <div class="tab-bar" id="userTabBar">
            <button class="tab-btn active" data-tab="overview">Overview</button>
            <button class="tab-btn" data-tab="transactions">Transactions</button>
            <button class="tab-btn" data-tab="profile">Profile</button>
            <button class="tab-btn" data-tab="support">Support</button>
        </div>
        <section class="user-dashboard-section tab-content active" id="overviewSection">
            <div class="user-details glass-card">
                <h2 id="userName">User Name</h2>
                <p id="userEmail">user@email.com</p>
                <div class="user-balance" id="userBalance">Balance: 0 FCFA</div>
            </div>
        </section>
        <section class="user-dashboard-section tab-content" id="transactionsSection">
            <div style="max-width:700px;margin:0 auto 2rem auto;">
                <h3 style="color:var(--primary-color);margin-bottom:1rem;text-align:center;">Past Transactions</h3>
                <table class="transactions-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Description</th>
                            <th>Amount</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="transactionsBody">
                        <!-- Transactions will be injected here -->
                    </tbody>
                </table>
            </div>
        </section>
        <section class="user-dashboard-section tab-content" id="profileSection">
            <div class="demo-content">Your profile details and settings will appear here.</div>
        </section>
        <section class="user-dashboard-section tab-content" id="supportSection">
            <div class="demo-content">Support and help resources will appear here.</div>
        </section>
    
    </main>
    <script>
document.addEventListener('DOMContentLoaded', () => {
    // Tab system for user dashboard (click + keyboard support)
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');

    function activateTab() {
        tabBtns.forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        const tab = this.getAttribute('data-tab');
        tabContents.forEach(section => {
            if (section.id === tab + 'Section') {
                section.classList.add('active');
            } else {
                section.classList.remove('active');
            }
        });
    }

    if (tabBtns.length) {
        tabBtns.forEach(btn => {
            btn.addEventListener('click', activateTab);
            btn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    activateTab.call(btn);
                }
            });
        });

        // Ensure an active tab is shown on load
        const initial = document.querySelector('.tab-btn.active') || tabBtns[0];
        if (initial) activateTab.call(initial);
    }

    // Theme toggle logic with guards
    const themeToggle = document.getElementById('themeToggle');
    const bodyEl = document.body;
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const savedTheme = localStorage.getItem('theme') || (prefersDark ? 'dark' : 'light');
    bodyEl.setAttribute('data-theme', savedTheme);
    if (themeToggle) themeToggle.innerHTML = savedTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
    if (themeToggle) themeToggle.addEventListener('click', () => {
        const currentTheme = bodyEl.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        bodyEl.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        themeToggle.innerHTML = newTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
    });

    // Example user data (simulate after signup/login)
    const user = {
        name: 'Alice N.',
        email: 'alice@market_online.cm',
        balance: 125000,
        transactions: [
            { date: '2025-07-30', desc: 'Received from Jean P.', amount: '+50,000 FCFA', status: 'Completed' },
            { date: '2025-07-28', desc: 'Payment to Fatima S.', amount: '-15,000 FCFA', status: 'Completed' },
            { date: '2025-07-25', desc: 'Received from Chantal D.', amount: '+90,000 FCFA', status: 'Completed' },
            { date: '2025-07-20', desc: 'Withdrawal', amount: '-10,000 FCFA', status: 'Completed' },
        ]
    };

    const userNameEl = document.getElementById('userName');
    const userEmailEl = document.getElementById('userEmail');
    const userBalanceEl = document.getElementById('userBalance');
    if (userNameEl) userNameEl.textContent = user.name;
    if (userEmailEl) userEmailEl.textContent = user.email;
    if (userBalanceEl) userBalanceEl.textContent = `Balance: ${user.balance.toLocaleString()} FCFA`;

    // Render transactions (guarded)
    const tbody = document.getElementById('transactionsBody');
    if (tbody) {
        if (!Array.isArray(user.transactions) || user.transactions.length === 0) {
            const tr = document.createElement('tr');
            tr.innerHTML = '<td colspan="4" style="text-align:center;color:var(--muted-color, #666);">No transactions yet</td>';
            tbody.appendChild(tr);
        } else {
            user.transactions.forEach(tx => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${tx.date}</td>
                    <td>${tx.desc}</td>
                    <td>${tx.amount}</td>
                    <td>${tx.status}</td>
                `;
                tbody.appendChild(tr);
            });
        }
    }
});
    </script>
</body>
</html>
