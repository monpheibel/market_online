<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>market_online | Marketplace</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
     <link rel="stylesheet" href="cameroon_theme.css">
    <style>
        .marketplace-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        .search-box {
            flex: 1;
            min-width: 250px;
            display: flex;
            gap: 0.5rem;
        }
        .search-box input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            background: var(--bg-color);
            color: var(--text-color);
        }
        .search-box button {
            padding: 0.75rem 1.5rem;
            background: var(--primary-color);
            color: #1a1a1a;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .search-box button:hover {
            background: var(--secondary-color);
        }
        .category-filter {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            background: var(--card-glass);
            padding: 1.5rem;
            border-radius: 1rem;
            backdrop-filter: blur(10px);
        }
        .category-btn {
            padding: 0.6rem 1.2rem;
            border: 2px solid var(--border-color);
            background: var(--bg-color);
            color: var(--text-color);
            border-radius: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        .category-btn.active {
            background: var(--primary-color);
            color: #1a1a1a;
            border-color: var(--primary-color);
        }
        .category-btn:hover {
            border-color: var(--primary-color);
        }
        .seller-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }
        .seller-modal.show {
            display: flex;
        }
        .seller-modal-content {
            background: var(--card-bg);
            border-radius: 1.2rem;
            padding: 2rem;
            max-width: 600px;
            width: 90vw;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }
        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            float: right;
            color: var(--text-light);
        }
        .seller-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .detail-item {
            background: var(--card-glass);
            padding: 1rem;
            border-radius: 0.5rem;
            border-left: 4px solid var(--primary-color);
        }
        .detail-label {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 0.3rem;
        }
        .detail-value {
            font-weight: 600;
            color: var(--text-color);
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container header-flex">
            <div class="logo">
                <h1>market_online Market</h1>
            </div>
            <div style="display: flex; gap: 1rem; align-items: center;">
                <a href="login.html" class="btn" style="padding: 0.5rem 1rem; text-decoration: none; background: var(--primary-color); color: #1a1a1a; border-radius: 0.5rem; border: none;">Login/Signup</a>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>
    <main>
        <div class="container">
            <!-- Search and Filter -->
            <div class="marketplace-header">
                <h2 style="color: var(--primary-color); flex: 1;">Browse Products & Services</h2>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search products...">
                    <button onclick="searchProducts()"><i class="fas fa-search"></i> Search</button>
                </div>
            </div>

            <!-- Category Filter -->
            <div class="category-filter">
                <button class="category-btn active" onclick="filterByCategory('all')">All Categories</button>
                <button class="category-btn" onclick="filterByCategory('Tailoring')"><i class="fas fa-scissors"></i> Tailoring</button>
                <button class="category-btn" onclick="filterByCategory('Hair & Beauty')"><i class="fas fa-spa"></i> Hair & Beauty</button>
                <button class="category-btn" onclick="filterByCategory('Food & Beverages')"><i class="fas fa-utensils"></i> Food</button>
                <button class="category-btn" onclick="filterByCategory('Services')"><i class="fas fa-tools"></i> Services</button>
                <button class="category-btn" onclick="filterByCategory('Electronics')"><i class="fas fa-laptop"></i> Electronics</button>
                <button class="category-btn" onclick="filterByCategory('Groceries')"><i class="fas fa-shopping-basket"></i> Groceries</button>
            </div>

            <!-- Products Grid -->
            <div class="products-grid" id="productsGrid">
                <!-- Product cards will be injected here -->
            </div>
        </div>
    </main>

    <!-- Seller Details Modal -->
    <div class="seller-modal" id="sellerModal">
        <div class="seller-modal-content">
            <button class="modal-close" onclick="closeSellerModal()">&times;</button>
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
// Theme toggle logic
const themeToggle = document.getElementById('themeToggle');
const body = document.body;
const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
body.setAttribute('data-theme', savedTheme);
themeToggle.innerHTML = savedTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
themeToggle.addEventListener('click', () => {
    const currentTheme = body.getAttribute('data-theme');
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    body.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    themeToggle.innerHTML = newTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
});

// Enhanced products with categories
const products = [
    { title: 'Custom Wedding Dress', owner: 'Alice N.', email: 'alice@market_online.com', phone: '+237 6 99 11 22 33', location: 'Douala', category: 'Tailoring', desc: 'Beautifully tailored dresses for all occasions.', img: 'https://cdn-icons-png.flaticon.com/512/892/892458.png', price: '150,000 FCFA' },
    { title: 'Moto Taxi Service', owner: 'Jean P.', email: 'jean@market_online.com', phone: '+237 6 77 88 99 00', location: 'Yaoundé', category: 'Services', desc: 'Fast and safe moto taxi rides in town.', img: 'https://cdn-icons-png.flaticon.com/512/201/201818.png', price: '1,000 FCFA/km' },
    { title: 'Home-cooked Meals', owner: 'Fatima S.', email: 'fatima@market_online.com', phone: '+237 6 55 44 33 22', location: 'Bamenda', category: 'Food & Beverages', desc: 'Delicious local meals delivered to your door.', img: 'https://cdn-icons-png.flaticon.com/512/1046/1046784.png', price: '5,000 FCFA' },
    { title: 'Professional Hair Styling', owner: 'Emile K.', email: 'emile@market_online.com', phone: '+237 6 88 77 66 55', location: 'Bafoussam', category: 'Hair & Beauty', desc: 'Modern haircuts and beauty services.', img: 'https://cdn-icons-png.flaticon.com/512/3465/3465446.png', price: '10,000 FCFA' },
    { title: 'Fresh Snacks & Drinks', owner: 'Chantal D.', email: 'chantal@market_online.com', phone: '+237 6 22 33 44 55', location: 'Kribi', category: 'Groceries', desc: 'Tasty snacks and cold drinks for your events.', img: 'https://cdn-icons-png.flaticon.com/512/3075/3075975.png', price: '500-5,000 FCFA' },
    { title: 'Phone Repair Service', owner: 'Marc T.', email: 'marc@market_online.com', phone: '+237 6 11 22 33 44', location: 'Douala', category: 'Electronics', desc: 'Professional phone and gadget repair.', img: 'https://cdn-icons-png.flaticon.com/512/1042/1042330.png', price: '2,000-50,000 FCFA' },
    { title: 'Fresh Farm Produce', owner: 'Pierre L.', email: 'pierre@market_online.com', phone: '+237 6 99 88 77 66', location: 'Bamenda', category: 'Groceries', desc: 'Organic fresh vegetables and fruits.', img: 'https://cdn-icons-png.flaticon.com/512/3075/3075972.png', price: '1,000-10,000 FCFA' },
    { title: 'Shoe Repair & Cleaning', owner: 'Sophie M.', email: 'sophie@market_online.com', phone: '+237 6 44 55 66 77', location: 'Yaoundé', category: 'Services', desc: 'Professional shoe repair and cleaning services.', img: 'https://cdn-icons-png.flaticon.com/512/1722/1722730.png', price: '1,000-5,000 FCFA' },
];

let currentFilter = 'all';

// Get user status from localStorage (sync with admin dashboard)
let users = JSON.parse(localStorage.getItem('market_online_users')) || [];
function isUserActive(name) {
    const user = users.find(u => u.name === name);
    return !user || user.status === 'active';
}

function renderProducts(productsToRender = products) {
    const grid = document.getElementById('productsGrid');
    const filtered = productsToRender.filter(prod => {
        const matchesCategory = currentFilter === 'all' || prod.category === currentFilter;
        return matchesCategory && isUserActive(prod.owner);
    });

    if (filtered.length === 0) {
        grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 3rem; color: var(--text-light);"><i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 1rem; display: block;"></i><p>No products found in this category.</p></div>';
        return;
    }

    grid.innerHTML = filtered.map(prod => `
        <div class="product-card">
            <img src="${prod.img}" alt="${prod.title}" class="product-img">
            <div class="product-title">${prod.title}</div>
            <div class="product-owner"><i class="fas fa-user"></i> ${prod.owner}</div>
            <div class="product-location"><i class="fas fa-map-marker-alt"></i> ${prod.location}</div>
            <div style="color: var(--primary-color); font-weight: 600; font-size: 1.1rem; margin-bottom: 0.5rem;">${prod.price}</div>
            <div class="product-desc">${prod.desc}</div>
            <button class="contact-btn" onclick="showSellerDetails('${prod.owner}', '${prod.title}', '${prod.email}', '${prod.phone}', '${prod.location}', '${prod.category}')">
                <i class="fas fa-phone"></i> Contact
            </button>
        </div>
    `).join('');
}

function filterByCategory(category) {
    currentFilter = category;
    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    renderProducts();
}

function searchProducts() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    const filtered = products.filter(prod => 
        prod.title.toLowerCase().includes(searchTerm) ||
        prod.desc.toLowerCase().includes(searchTerm) ||
        prod.owner.toLowerCase().includes(searchTerm)
    );
    currentFilter = 'all';
    renderProducts(filtered);
}

function showSellerDetails(owner, product, email, phone, location, category) {
    const modal = document.getElementById('sellerModal');
    const modalBody = document.getElementById('modalBody');
    
    modalBody.innerHTML = `
        <div style="text-align: center; margin-bottom: 2rem;">
            <div style="width: 80px; height: 80px; background: var(--primary-color); border-radius: 50%; margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; font-size: 2rem;">
                <i class="fas fa-store" style="color: #1a1a1a;"></i>
            </div>
            <h2 style="color: var(--text-color); margin-bottom: 0.5rem;">${owner}</h2>
            <p style="color: var(--text-light); margin-bottom: 1rem;">${category}</p>
        </div>

        <h3 style="color: var(--primary-color); margin-bottom: 1.5rem;">Product Details</h3>
        <div class="seller-details">
            <div class="detail-item">
                <div class="detail-label"><i class="fas fa-box"></i> Product</div>
                <div class="detail-value">${product}</div>
            </div>
            <div class="detail-item">
                <div class="detail-label"><i class="fas fa-tag"></i> Category</div>
                <div class="detail-value">${category}</div>
            </div>
        </div>

        <h3 style="color: var(--primary-color); margin-bottom: 1.5rem;">Contact Information</h3>
        <div class="seller-details">
            <div class="detail-item">
                <div class="detail-label"><i class="fas fa-envelope"></i> Email</div>
                <div class="detail-value"><a href="mailto:${email}" style="color: var(--primary-color); text-decoration: none;">${email}</a></div>
            </div>
            <div class="detail-item">
                <div class="detail-label"><i class="fas fa-phone"></i> Phone</div>
                <div class="detail-value"><a href="tel:${phone}" style="color: var(--primary-color); text-decoration: none;">${phone}</a></div>
            </div>
            <div class="detail-item" style="grid-column: 1/-1;">
                <div class="detail-label"><i class="fas fa-map-marker-alt"></i> Location</div>
                <div class="detail-value">${location}</div>
            </div>
        </div>

        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button style="flex: 1; padding: 0.75rem; background: var(--primary-color); color: #1a1a1a; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer;" onclick="window.location.href='mailto:${email}'">
                <i class="fas fa-envelope"></i> Send Email
            </button>
            <button style="flex: 1; padding: 0.75rem; background: var(--primary-color); color: #1a1a1a; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer;" onclick="window.location.href='tel:${phone}'">
                <i class="fas fa-phone"></i> Call Now
            </button>
        </div>
    `;

    modal.classList.add('show');
}

function closeSellerModal() {
    document.getElementById('sellerModal').classList.remove('show');
}

// Close modal when clicking outside
document.getElementById('sellerModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeSellerModal();
    }
});

renderProducts();
    </script>
</body>
</html>
